- content_for :scripts do
  = javascript_include_tag 'https://maps-api-ssl.google.com/maps/api/js?sensor=false'
  :javascript
    $(document).ready(function() {
      var geocoder = new google.maps.Geocoder();

      // map
      var latlng = new google.maps.LatLng(#{@event.location.latitude},#{@event.location.longitude});
      var myOptions = {
        zoom: 15,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

      // street view
      var panoramaOptions = {
        position: latlng,
        pov: {
          heading: 34,
          pitch: 10,
          zoom: 1
        }
      };
      var panorama = new google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);
      var sv = new google.maps.StreetViewService();

      function processSVData(data, status) {
        if (status == google.maps.StreetViewStatus.OK) {
          panorama.setPano(data.location.pano);
          panorama.setVisible(true);
        }
      }

      sv.getPanoramaByLocation(latlng, 300, processSVData)
    });

- unless notice.blank?
  #notice.alert= notice

%p
  = link_to 'Back', admin_project_events_path(@project), title: "Back", class: "btn btn-inverse"
  = link_to '<i class="icon-plus"></i>'.html_safe, new_admin_project_event_path(@project), title: "New", class: "btn"

%textarea{class: "tmpl", "data-project" => "#{@project.name}", "data-model" => "#{controller_name}", "data-action" => "#{action_name}"}
  %tr{class: "${state}"}
    %td{colspan: 2}
      = link_to '<i class="icon-ok-circle"></i>'.html_safe, admin_url + '${id}/approve.json', remote: true, class: "state approve btn", title: "Approve"
      = link_to '<i class="icon-ban-circle"></i>'.html_safe, admin_url + '${id}/deny.json', remote: true, class: "state deny btn", title: "Deny"
      = link_to '<i class="icon-edit"></i>'.html_safe, admin_url + '${id}/edit', class: "btn", title: "Edit"
      = link_to '<i class="icon-trash"></i>'.html_safe, admin_url + '${id}', confirm: 'Are you sure?', method: :delete, class: "btn delete", title: "Delete"
  
  %tr
    %td Created at
    %td ${created_at}
  %tr
    %td Updated at
    %td ${updated_at}
  %tr
    %td State
    %td ${state}
  %tr
    %td Name
    %td ${name}
  %tr
    %td Type
    %td ${type}
  %tr
    %td URL
    %td ${url}
  %tr
    %td Start Date
    %td ${start_date}
  %tr
    %td End Date
    %td ${end_date}
  %tr
    %td Details
    %td ${details}
  %tr
    %td Location Name
    %td ${location.name}
  %tr
    %td Location Address
    %td ${location.address}
  %tr
    %td Location Latitude
    %td ${location.latitude}
  %tr
    %td Location Longitude
    %td ${location.longitude}

.row
  .span6
    %table.table.table-striped.table-bordered

  .span6
    .google-map
      #map_canvas
      #pano
      %p
        * Showing nearest Street View (within 300 Meters)